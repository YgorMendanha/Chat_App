import{r as u,j as m,a as e,B as g,l as p,R as y,b as f}from"./vendor.e5b38519.js";const v=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}};v();const N="_chat_header_cucyz_1",b="_chat_body_cucyz_15",x="_message_container_cucyz_29",M="_message_you_cucyz_51",z="_message_content_cucyz_65",S="_message_meta_cucyz_109",E="_message_other_cucyz_133",L="_chat_footer_cucyz_211",j="_you_cucyz_271",w="_other_cucyz_277";var a={chat_header:N,chat_body:b,message_container:x,message_you:M,message_content:z,message_meta:S,message_other:E,chat_footer:L,you:j,other:w};function B({socket:r,username:c,room:n}){const[i,t]=u.exports.useState(""),[s,l]=u.exports.useState([]),d=async()=>{if(i!==""){const o={room:n,author:c,message:i,time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()};await r.emit("send_Message",o),l(h=>[...h,o]),document.getElementById("msg").value="",t("")}};return u.exports.useEffect(()=>{r.on("receive_Message",o=>{console.log(o),l(h=>[...h,o])})},[r]),m("div",{children:[e("div",{className:a.chat_header,children:e("p",{children:"Chat App"})},"div"),e("div",{className:a.chat_body,children:e(g,{className:a.message_container,children:s.map(o=>e("div",{children:c===o.author?e("div",{className:a.message_you,children:m("div",{children:[e("div",{className:a.message_content,children:e("p",{children:o.message})}),e("div",{className:a.message_meta,children:e("p",{children:o.time})})]})}):e("div",{className:a.message_other,children:m("div",{children:[e("div",{className:a.message_content,children:e("p",{children:o.message})}),e("div",{className:a.message_meta,children:e("p",{children:o.time})})]})})}))})}),m("div",{className:a.chat_footer,children:[e("input",{type:"text",id:"msg",placeholder:"Hey...",onChange:o=>{t(o.target.value)},onKeyPress:o=>{o.key==="Enter"&&d()}}),e("button",{onClick:d,children:"\u25BA"})]})]})}const _=p.connect("https://chat-app-back-end.herokuapp.com");function D(){const[r,c]=u.exports.useState(""),[n,i]=u.exports.useState(""),[t,s]=u.exports.useState(!1);return e("div",{children:t===!1?m("div",{className:"login",children:[e("p",{children:"Escolha um User e uma Sala!"}),e("input",{type:"text",placeholder:"User...",onChange:d=>{c(d.target.value)}}),e("input",{type:"text",placeholder:"Sala...",onChange:d=>{i(d.target.value)}}),e("button",{onClick:()=>{r!==""&&n!==""&&(_.emit("join_room",n),s(!0))},children:"Entrar"})]}):e("div",{children:e(B,{socket:_,username:r,room:n})})})}y.render(e(f.StrictMode,{children:e(D,{})}),document.getElementById("root"));
